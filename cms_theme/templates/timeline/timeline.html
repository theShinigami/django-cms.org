{% load frontend cms_tags sekizai_tags thumbnail %}

<section
    id="timeline-{{ instance.pk }}"
    class="{% if instance.config.background_grid %}background-grid{% endif %} {{ instance.get_classes }}"
    {{ instance.get_attributes }}
>
    <div class="container">
        {# Header content: Heading and intro text #}
        {% for child in instance.child_plugin_instances %}
            {% if child.plugin_type != "CardPlugin" %}
                {% render_plugin child %}
            {% endif %}
        {% endfor %}

        {# Timeline items as ordered list for semantic structure #}
        <ol class="main-timeline timeline-divider-{{ instance.config.divider_color|default:'primary' }} timeline-circle-{{ instance.config.circle_color|default:'secondary' }}" role="list">
            {% for child in instance.child_plugin_instances %}
                {% if child.plugin_type == "CardPlugin" and child.child_plugin_instances %}
                    <li class="timeline {% cycle 'timeline-right' 'timeline-left' %}" role="listitem">
                        {% render_plugin child %}
                    </li>
                {% endif %}
            {% empty %}
                {# No timeline items #}
            {% endfor %}
        </ol>
    </div>
</section>